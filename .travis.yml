language: node_js
sudo: required
# æŒ‡å®šnode_jsç‰ˆæœ¬
node_js: 
  - 12.13.
# æŒ‡å®šç¼“å­˜æ¨¡å—ï¼Œå¯é€‰ã€‚ç¼“å­˜å¯åŠ å¿«ç¼–è¯‘é€Ÿåº¦ã€‚
cache:
  directories:
    - node_modules

# æŒ‡å®šåšå®¢æºç åˆ†æ”¯ï¼Œå› äººè€Œå¼‚ã€‚hexoåšå®¢æºç æ‰˜ç®¡åœ¨ç‹¬ç«‹repoåˆ™ä¸ç”¨è®¾ç½®æ­¤é¡¹
branches:
  only:
    - master 

# Start: Build Lifecycle
install:
  - npm install

# æ‰§è¡Œæ¸…ç¼“å­˜ï¼Œç”Ÿæˆç½‘é¡µæ“ä½œ
script:
  - npm run build

# è®¾ç½®gitæäº¤åï¼Œé‚®ç®±ï¼›æ›¿æ¢çœŸå®tokenåˆ°_config.ymlæ–‡ä»¶ï¼Œæœ€ådepoyéƒ¨ç½²
after_script:
  - cd dist
  
  - git init
  - git branch gh_page
  - git add .
  - git commit -m "new posts. ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š"

  - git config user.name "travis ci"
  - git config user.email "200739491@qq.com"
  - git remote add origin https://0x30:${GITHUB_TOKEN}@github.com/0x30/0x30.github.io.git
  - git push origin -f gh_page
